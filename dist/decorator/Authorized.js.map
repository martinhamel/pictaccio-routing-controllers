{"version":3,"file":"Authorized.js","sourceRoot":"","sources":["../../src/decorator/Authorized.ts"],"names":[],"mappings":";;AAsCA,gCAWC;AAjDD,oCAAkD;AAkClD;;;GAGG;AACH,SAAgB,UAAU,CAAC,WAA0C,EAC1C,gBAAmC;IAC5D,OAAO,UAAU,WAA8B,EAAE,MAAe;QAC9D,IAAA,8BAAsB,GAAE,CAAC,gBAAgB,CAAC,IAAI,CAAC;YAC7C,IAAI,EAAE,YAAY;YAClB,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC,CAAE,WAAwB;YACpE,MAAM,EAAE,MAAM;YACd,KAAK,EAAE,WAAW;YAClB,cAAc,EAAE,gBAAgB;SACjC,CAAC,CAAC;IACL,CAAC,CAAC;AACJ,CAAC","sourcesContent":["import { getMetadataArgsStorage } from '../index';\nimport { OwnershipChecker } from '../metadata/types/OwnershipChecker';\n\n/**\n * Marks controller action to have a special access.\n * Authorization logic must be defined in routing-controllers settings.\n */\nexport function Authorized(): Function;\n\n/**\n * Marks controller action to have a special access.\n * Authorization logic must be defined in routing-controllers settings.\n */\nexport function Authorized(role: any): Function;\n\n/**\n * Marks controller action to have a special access.\n * Authorization logic must be defined in routing-controllers settings.\n */\nexport function Authorized(roles: any[]): Function;\n\n/**\n * Marks controller action to have a special access.\n * Authorization logic must be defined in routing-controllers settings.\n */\nexport function Authorized(role: Function): Function;\n\n/**\n * Same as the others but adds possibility to provide ownership information\n */\nexport function Authorized(role: any, ownershipChecker?: OwnershipChecker): Function;\nexport function Authorized(role: any[], ownershipChecker?: OwnershipChecker): Function;\nexport function Authorized(role: Function, ownershipChecker?: OwnershipChecker): Function;\n\n/**\n * Marks controller action to have a special access.\n * Authorization logic must be defined in routing-controllers settings.\n */\nexport function Authorized(roleOrRoles?: string | string[] | Function,\n                           ownershipChecker?: OwnershipChecker): Function {\n  return function (clsOrObject: Function | Object, method?: string) {\n    getMetadataArgsStorage().responseHandlers.push({\n      type: 'authorized',\n      target: method ? clsOrObject.constructor : (clsOrObject as Function),\n      method: method,\n      value: roleOrRoles,\n      secondaryValue: ownershipChecker\n    });\n  };\n}\n"]}